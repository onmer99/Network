# [Study] 이동희

# 1.1 네트워크 구성도

네트워크는 서비스를 제공하는 네트워크 / 서비스를 받는 네트워크로 나뉨

### 1. 홈 네트워크

- 홈 네트워크를 구성하는 데에는 모뎀-공유기-단말 간의 연결이 요구됨.
- 연결은 유선, 무선으로 가능한데 유선은 **유선 랜 카드, 랜 케이블**이 요구되고, 무선은 **무선 랜 카드와 무선 신호를 보낼 수 있는 공기와 같은 매체**가 필요하다.
- 유선에서의 연결 매체 == 랜 케이블(랜선) / 무선에서의 연결 매체 == 공기

### 2. 데이터 센터 네트워크

데이터 센터 네트워크는 안정적이고 빠른 대용량 서비스 제공이 목표

안정적 서비스를 위해 이중화 기술을 사용하고 서버와 서비스가 하나의 네트워크에 연결되어 있음

높은 통신량을 요구하기 때문에 고속 이더넷 기술이 사용됨

# 1.2 프로토콜

규약이나 규정을 나타내는 단어

네트워크에서 프로토콜(Protocol)이란 통신할 때의 규약을 뜻함

- **물리적 프로토콜**: 데이터 전송 매체, 신호 규약, 회선 규격, 이더넷 등 물리적 측면에서의 규약 및 규격
- **논리적 프로토콜**: 장치끼리 통신하기 위한 프로토콜 규격. TCP/IP가 대표적

과거에 네트워크 시스템이 열악하던 환경에서는 지금과 같이 프로토콜이 문자 기반이 아닌 2진수 비트(bit) 기반으로 이루어짐.

네트워크 속도도 느렸기 때문에 최대의 효율을 내기 위해 받는 n번 째 신호는 사람의 주소, n+1번 째 신호는 보내는 사람의 주소를 담는 것과 같이 약속을 철저하게 지켜서 통신함.

현재는 비트 기반 프로토콜이 아닌 문자 기반 프로토콜을 사용함(HTTP/SMTP)

### TCP/IP 스택

일반적으로 TCP/IP는 프로토콜이라고 부르기보다는 프로토콜 스택이라고 부른다.

별도의 계층에서 사용되는 프로토콜이지만 함께 사용되는 프로토콜을 묶어서 **프로토콜 스택**이라고 부른다.

# 1.3 OSI 7계층과 TCP/IP

### OSI 7 계층

과거에는 통신 규약이 표준화 되어 있지 않고 벤더 별로 존재했기 때문에, 서로 호환되지 않는 시스템이나 애플리케이션은 통신이 불가능했다.

서로 **원활한 통신을 위해 규약을 통일한 것이 바로 OSI 7계층**이다.

OSI 7 계층은 네트워크 동작을 이해하는데에 도움이 되기 때문에 레퍼런스로 모델로 많이 활용되나, 대부분의 프로토콜은 TCP/IP 기반의 프로토콜 스택 기반이다.

OSI 7 계층은 하위/상위 계층으로 다시 한 번 나뉜다.

- 1~4계층: 데이터 플로 계층(Data Flow Layer) / 하위 계층(Lower Layer), 네트워크 / 서버 개발자가 고려해야 할 부분
- 5~7계층: 애플리케이션 계층(Application Layer) / 상위 계층(Upper Layer), 애플리케이션 개발자가 고려해야 할 부분

### TCP/IP 프로토콜 스택

TCP/IP 모델은 OSI 7 계층과 다르게 4계층으로 구분된다.

TCP/IP 모델은 OSI 7 계층의 상위 3개 계층(Application, Presentation, Session), **7계층, 6계층, 5계층을 애플리케이션 계층**으로 묶는다. 

4 계층은 그대로 **Transport 계층**, 3 계층(Network)은 **Internet 계층**으로, 2계층(Data Link)과 1계층(Physical)은 **Network Access 계층**으로 묶는다.

# 1.4 OSI 7계층별 이해하기

### 1. 1계층(Physical Layer)

물리 계층과 물리적 연결과 관련된 정보 정의

들어오는 전기신호를 받고 재생성하여 보내는 것이 목적

- 장비:
  - 허브(Hub)
  - 리피터(Repeater)
  - 케이블(Cable)
  - 커넥터(Connector)
  - 트랜시버(Tranceiver)
  - 탭(TAP)

### 2. 2계층(Data Link Layer)

전기신호를 데이터 형태로 처리하는 계층

출발지와 도착지 주소를 확인, 데이터에 대한 에러 탐지, 데이터 목적지 주소의 사람이 현재 데이터를 받을 수 있는지 확인(Flow Control)

- 네트워크 인터페이스 카드 동작방식
1. 네트워크 인터페이스 카드(Network Interface Card, NIC)를 통해 전기신호에서 변환된 데이터의 목적지 MAC 주소와 출발지 MAC 주소를 확인한다.

2. NIC의 MAC 주소를 확인한다.

3. MAC 주소가 서로 일치하면 데이터를 상위 계층에서 처리할 수 있도록 적재, 아니면 폐기한다.
- 장비:
  - NIC
  - 스위치
  - 브릿지

### 3. 3계층(Network Layer)

3계층에서는 네트워크 정보 주소를 이용하여 목적지가 자신이 속한 네트워크인지, 다른 네트워크인지 구분하고 목적지를 향한 네트워크 경로를 지정한다.

IP를 활용하여 정확한 주소를 알아낸다. 

- 장비:
  - 라우터(Router)
  - L3 스위치

### 4. 4계층(Transport Layer)

1, 2, 3계층을 통해 보내지는 데이터가 정상적으로 잘 보내지는지 확인하는 계층

데이터는 분할되어 패킷(Packet)에 담겨 보내지게 되는데, 중간에 유실되거나 순서가 바뀐 패킷이 발생하기도 한다.

Transport Layer에서는 패킷 헤더의 정보를 확인하여 패킷 재전송을 요청한다.

패킷의 보내는 순서는 **시퀀스 번호(Sequence Number, 패킷의 순서)**

받는 순서는 **ACK 번호(Acknowledgement Number, 응답 번호)**

애플리케이션은 **포트 번호(Port Number)로** 구분한다.

- 장비:
  - 로드 밸런서
  - 방화벽

### 5. 5계층(Session Layer)

응용 프로세스간의 연결을 유지하고, 끊는 것을 돕는다. 연결이 안정적으로 유지되게 하고 작업이 끝나면 연결을 끊는 역할을 수행한다.

에러로 중단된 통신에 대한 에러 복구 및 재전송도 수행한다.

**세션(Session)을** 관리한다고 함은, TCP/IP 세션을 만들고 없애는 것이다.

### 6. 6계층(Presentation Layer)

애플리케이션, 시스템간 데이터를 통일된 구문 형식으로 변환

MIME 인코딩, 암호화, 합축, 코드 변환

### 7. 7계층(Application Layer)

애플리케이션 프로세스 정의, 애플리케이션 서비스 수행

소프트웨어의 UI, 사용자 입출력 정의를 담당

- 프로토콜의 종류:
  - FTP
  - SMPT
  - HTTP
  - TELNET
- 장비:
  - ADC
  - NGFW
  - WAF

# 1.5 인캡슐레이션과 디캡슐레이션

데이터를 보내는 과정은 상위 계층 → 하위 계층 → 물리 계층에서 전기 신호 형태로 네트워크를 통해 신호를 보냄

받는 쪽에서 물리 계층으로 데이터를 받아서 하위 계층 → 상위 계층 순으로 데이터를 전달함

이 때 데이터를 보내는 과정을 **인캡슐레이션(Encapsulation),**

데이터를 받는 과정을 **디캡슐레이션(Decapsulation)** 이라고 한다.

### 인캡슐레이션(Encapsulation)

패킷 네트워크를 통해 데이터를 패킷이라는 단위로 쪼개서 보내고, 애플리케이션은 1~4계층으로 데이터를 내려보내면서 데이터가 패킷에 들어갈 수 있도록 분할하는 과정을 거친다.

인캡슐레이션 과정에서 4계층부터 네트워크 전송에 필요한 정보를 헤더에 추가하여 다음 계층으로 내려보낸다.

### 디캡슐레이션(Decapsulation)

1계층에서는 받은 전기신호를 데이터 형태로 2계층으로 전달한다.

2계층에서는 2계층 헤더에 포함된 헤더를 확인하고 헤더 정보를 벗겨내고 3계층으로, 3계층에서는 4계층으로 데이터를 보낸다. 과정에서 정보의 목적지가 맞지 않으면 패킷을 버린다.

데이터는 결국 보내는 쪽에서 상위계층 → 하위계층, 받는 쪽에서는 하위계층 → 상위계층으로 이동한다.

# 2.1 네트워크 연결 부분

네트워크는 규모와 관리 범위에 따라 3가지로 나뉜다.

1. LAN(Local Area Network): 사용자 내부 네트워크
2. MAN(Metro Area Network): 하나의 도시 규모의 네트워크(하나의 도시를 연결하고 관리)
3. WAN(Wide Area Network): 멀리 떨어진 LAN을 연결해주는 네트워크. LAN간의 연결을 지원하는 네트워크

### LAN

사무실용 네트워크와 같은 소규모 네트워크

먼 거리를 통신할 필요가 없어 스위치 같은 간단한 장비로 연결

### WAN

먼 거리에 있는 네트워크를 연결하기 위한 네트워크

주로 LAN을 서로 연결하거나 인터넷에 접속하기 위한 네트워크가 WAN이다.

보통 직접 구축할 수 없기 때문에 KT, LGU+, SKB와 같은 ISP가 제공하는 회선을 임대하여 사용한다.

# 2.2 네트워크 회선

### 인터넷 회선

인터넷 접속을 위해서 통신사업자가 제공하는 회선. 해당 회선에 연결해야 인터넷 접속이 가능하다.

아파트 같은 경우에는 가입자와 통신사업자 간에 회선으로 직접 연결되는 것이 아니라 **선로 공유 기술을 사용**하여 여러 세대가 아파트와 통신사업자 간에 연결된 회선을 공유한다.

### 전용 회선

가입자와 통신사업자 간에 대역폭을 보장해주는 서비스를 전용 회선이라고 한다.

전용 회선에서의 전송 기술은 두 가지가 있다.

1. **저속: 음성 전송 기술 기반**
   1. 작은 기본 단위를 묶어 회선 접속 속도를 높이는 방법의 기술이다.
   2. 속도가 빠르지 않아 높은 신뢰성이 필요할 때 사용되어 왔다.
   3. 사용을 위해 라우터가 필요하다.
2. **고속: 메트로 이더넷**
   1. 광케이블 기반의 이더넷을 사용한다.
   2. 가입자를 구분하고 가입자 트래픽을 고속으로 전송하는 것이 중요하기 때문에 이더넷을 활용한다.

### 인터넷 전용 회선

통신사업자와 가입자 간의 연결 품질 / 통신 대역폭을 보장해주는 회선

가입자와 통신사업자가 연결되고 해당 연결이 다시 인터넷에 연결되는 구조이다

### VPN

Virtual Private Network의 약자로 물리적으로는 전용선이 아니지만 가상으로 직접 연결한 것과 같은 효과를 낼 수 있게 해주는 네트워크 기술이다.

### 통신사업자 VPN

같은 도시 내의 전용선 연결은 비용이 비싸지 않지만 다른 도시, 국가 간의 연결은 비용이 매우 비싸기 때문에 **MPLS VPN과 같은 기술을 활용해 여러 가입자가 하나의 망에 접속하여 통신**하도록 한다.

여러 명이 하나의 망, 공동 회선을 이용하기 때문에 사용 비용이 낮아진다.

### 가입자 VPN

주로 일반 사용자가 이용하는 VPN이다. 해외의 전용선에 연결하는 것은 매우 비싸고, MPLS VPN 기술도 일반 인터넷 연결 비용보다 비싸기 때문에, 일반 인터넷 연결을 이용한 VPN을 사용한다.

### DWDM

Dense Wavelength Division Multiplex의 약자이다. 먼 거리를 통신하게 되면 거리에 따라 케이블 설치 / 관리의 비용 또한 많이 든다는 단점이 있었다.

하나의 광케이블에는 하나의 통신만 가능했는데, 여러 가입자에게 높은 대역폭의 통신 서비스를 제공하기 위해서는 많은 케이블 설치가 필요했고 이는 물리적으로나, 경제적으로나 쉽지 않다.

DWDM 기술은 하나의 광케이블을 활용하여 여러 채널을 만들고 전송 가능한 데이터양을 대폭 늘려준다.

WDM과 DWDM 기술은 하나의 광케이블에 다른 파장의 빛으로 여러 채널의 통신을 가능하게 해준다.

최근에 일반가정에서 사용하는 기가 인터넷에서도 사용된다.

# 2.3 네트워크 구성 요소

### 네트워크 인터페이스 카드(Network Interface Card: NIC)

랜 카드, 네트워크 카드, 네트워크 인터페이스 컨트롤러 등 다양한 명칭을 불린다.

**컴퓨터를 네트워크에 연결하기 위한 하드웨어 장치이다.**

노트북이나 데스크톱에는 NIC가 기본적으로 내장되어 있기 때문에 카드를 추가할 일이 거의 없다.

하지만 서버의 경우, 서버에도 기본적으로 내장은 되어 있으나 여러 네트워크에 동시에 연결되어야 하거나, 더 높은 대역폭이 필요한 경우에는 NIC를 추가로 장착해야한다.

- 역할:
  - 직렬화(Serialization)
    - 1계층에서 전기 신호를 데이터 신호 형태로 변환해주거나, 데이터 신호 형태를 전기적 신호 형태로 변환해주는 작업을 거친다.
    - 신호를 변환하는 작업을 **직렬화**라고 한다.
  - MAC 주소(Media Access Control)
    - 통신을 위해 존재하는 하드웨어의 장비의 고유한 주소이다.
    - 모든 NIC는 기본적으로 MAC 주소를 가진다.
    - 패킷의 헤더에는 각종 정보가 저장되는데 도착지 주소 또한 저장된다.
    - 받은 패킷의 헤더에 저장된 목적지 MAC 주소가 자신의 MAC 주소와 같으면 시스템 내부에서 처리할 수 있도록 다음 계층으로 전달한다.
    - 아니라면 폐기한다.
  - 흐름 제어(Flow Control)
    - 여러 통신이 하나의 채널을 이용하는 경우, 이미 통신 중인 데이터로 인해 새로운 데이터를 받지 못할 수도 있다.
    - 이 경우, 데이터 유실이 발생할 수 있는데, 이를 방지하기 위해 데이터를 받지 못하는 상황일 경우에는 데이터 송신자에게 통신 중지를 요청할 수 있다.
    - 즉 데이터 유실 방지를 위해 유동적으로 통신을 중지하는 것을 **흐름 제어**라고 한다.

### 케이블과 커넥터

신뢰도가 높은 통신이 필요한 경우 유선을 사용한다.

케이블의 종류에는

- 트위스티드 페어(Twisted Pair)
- 동축(Coaxial)
- 광(Fiber-optic)

케이블은 케이블 본체, 커넥터, 트랜시버로 나뉜다.

케이블 본체는 또 트위스티드 페어, 동축, 광케이블로 나뉜다.

### 트위스티드 페어 케이블

가장 많이 사용하는 케이블

컴퓨터나 서버의 랜포트에 끼워서 네트워크에 연결시킨다.

### 동축 케이블

케이블 TV와 연결할 때 사용하는 두꺼운 검정 케이블

최근에는 10G 이상의 고속 연결에도 쓰인다(DAC 케이블 사용되는데 이 케이블이 동축 케이블의 한 종류)

### 광케이블

먼 거리까지 통신할 수 있도록 해주기 때문에 높은 대역폭을 요구하거나 먼 거리를 통신해야 하는 경우에 사용됨.

데이터 전송 분야에서 사용되며 낮은 에러율, 고속 데이터 송수신과 높은 신뢰도를 지닌다.

- 싱글모드
  - 먼 거리 통신 지원
  - 케이블 굵기가 매우 가늘고 신호를 보내기 위해 레이저 사용
- 멀티모드
  - 단거리 통신에 특화되어 있음
  
  - 굵은 케이블
  
  - LED 사용

### 커넥터

케이블의 끝부분

네트워크 장비나 카드에 연결됨

네트워크 연결을 위해서 케이블에 맞는 적절한 커넥터를 사용하여야 함

### 트랜시버

Transmitter(전송기) + Receiver(수신기) = Transceiver(트랜시버)

송신과 수신을 담당함

외부 신호를 컴퓨터 전기 신호로 바꾸어 줌

트랜시버가 없으면 이더넷 표준과 케이블에 맞는 네트워크 장비 / NIC를 사용해야 했다.

트랜시버를 통해 서로 다른 네트워크 표준을 혼용해 사용할 수 있는 것이다.

### 허브

케이블과 같이 1계층에서 동작하는 장비이다.

여러 대의 장비를 연결할 목적으로 사용된다. 네트워크 장비와 장비를 연결해준다.

허브는 다양한 기기로부터 전기신호를 받아서 신호를 증폭시키고 모든 다른 장비들로 전달해주는 역할을 한다.

하지만 네트워크 성능 저하의 문제, 패킷 무한 순환으로 인한 네트워크 마비로 현재는 거의 사용되지 않는다.

![network hub](http://www.learnabhi.com/wp-content/uploads/2018/01/hub-thumbnail-copy.jpg)

### 스위치

**네트워크 내의 통신 흐름을 제어한다.**

2계층에서 동작하는 장비이다.

여러 장비를 연결한다는 점이 허브와 같다. 스위칭 허브라고도 불린다.

허브와 다른 점은 허브는 전기 신호를 재생성해 모든 포트로 전기신호를 보내지만 스위치는 MAC 주소를 읽을 수 있기 때문에 목적지 MAC 주소로만 전기 신호를 보낸다.

### 라우터

**네트워크 간의 통신흐름을 제어한다.**

3계층에서 동작하는 장비이다.

3계층에서 라우터는 원격지로 전달되는 패킷을 관리하고, 정확한 방향으로 패킷이 전송되도록 최적의 경로로 패킷을 보내는 역할을 한다.

### 보안 장비(방화벽/IPS)

방화벽은 4계층에서 동작한다.

공격을 막기 위해 컴퓨터와 네트워크 사이에 존재하는 하드웨어나 소프트웨어

방화벽을 통과하는 패킷의 3, 4 계층 정보를 확인하고 패킷의 정책과 비교하여 같으면 다음 계층으로 보내고 아니라면 버린다.

### 로드 밸런서

4계층에서 동작하는 장비이다. ADC(Application Delivery Controller)라고 부르기도 한다.

서비스에서 발생하는 트래픽 양이 많을 때, 여러 서버가 트래픽을 분산처리한다. 서버에 가해지는 트래픽을 여러대의 서버에게 균등하게 분산시켜 준다.

![로드 밸런서란 무엇입니까?](https://www.f5.com/content/dam/f5-com/page-assets-en/home-en/resources/glossary/what%20is%20load%20balancing.png)

![Network Architecture](https://camo.githubusercontent.com/f41fc27bad31518d4f6cf9f1e7a05f118a9d4ddf0108dff9a2923663c1968a78/68747470733a2f2f70696d616765732e746f6f6c626f782e636f6d2f77702d636f6e74656e742f75706c6f6164732f323032312f31322f31373134323535322f4e6574776f726b2d4172636869746563747572652e6a7067)

### 이더넷 네트워크 표준

이더넷이란 하나의 인터넷 회선에 통신장비 / 공유기를 통해 다수의 시스템이 랜선이나 포트에 연결되어 통신하는 네트워크 구조이다.

현재 가장 많이 사용되는 네트워킹 방식이다. 

이더넷 표준에는 여러가지가 있는데, 대중화 된 이더넷 표준은 **기가비트 이더넷과 10기가비트 이더넷**이 있다.

> 기가비트 이더넷: 데이터를 1기가비트의 속도로 전송하는 기술

> 10기가비트 이더넷: 데이터를 초당 10기가비트의 속도로 전송하는 기술

대중적으로 많이 사용하는 이더넷 표준에는 3가지가 있다.

| 명칭          | 표준      | 속도  | 타입       | 거리       |
| ----------- | ------- | --- | -------- | -------- |
| 1000BASE-T  | 802.3ab | 1G  | 트위스티드 페어 | 100m     |
| 1000BASE-SX | 802.3z  | 1G  | 광        | 220~550m |
| 1000BASE-LX | 802.3z  | 1G  | 광        | ~5km     |

- 1000BASE-T / 10GBASE-T: **트위스티드 페어 케이블** 이용, 기가 이더넷 표준
- 1000BASE-SX / 10BASE-SR: **멀티모드 광케이블** 사용, 비교적 짧은 거리 보낼 수 있는 이더넷 표준
- 1000BASE-LX / 10GBASE-LR: **싱글모드 광케이블** 사용, 비교적 긴 거리 보낼 수 있는 이더넷 표준

`1000(속도)BASE(채널)-T(케이블타입)`

## 참고자료

[https://joonfluence.tistory.com/96](https://joonfluence.tistory.com/96)

[https://jaeseolee3754.tistory.com/46](https://jaeseolee3754.tistory.com/46)

[https://inpa.tistory.com/entry/WEB-🌐-이더넷-이란-무엇인가](https://inpa.tistory.com/entry/WEB-%F0%9F%8C%90-%EC%9D%B4%EB%8D%94%EB%84%B7-%EC%9D%B4%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80)

[https://gdnn.tistory.com/101](https://gdnn.tistory.com/101)

[http://www.ktword.co.kr/test/view/view.php?m_temp1=2028](http://www.ktword.co.kr/test/view/view.php?m_temp1=2028)

[https://haeunyah.tistory.com/122](https://haeunyah.tistory.com/122)

[https://yeoulcoding.me/127](https://yeoulcoding.me/127)

[광케이블의 이해](https://enjoywork.tistory.com/entry/%EA%B4%91%EC%BC%80%EC%9D%B4%EB%B8%94%EC%9D%98-%EC%9D%B4%ED%95%B4)

https://velog.io/@ragnarok_code/Network-%EB%A1%9C%EB%93%9C%EB%B0%B8%EB%9F%B0%EC%84%9CLoad-Balancer%EB%9E%80

https://www.f5.com/ko_kr/glossary/load-balancer
