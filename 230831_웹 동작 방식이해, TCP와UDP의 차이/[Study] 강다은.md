## TCP와 UDP의 차이

![화면 캡처 2023-08-31 131655](https://github.com/spharos3rd-CatchYou/Network/assets/87631575/abb5ce79-e450-449b-9114-23376547e9df)

### TCP

TCP(Transmission Control Protocol)는 전송계층 프로토콜로 신뢰성 있는 연결형 프로토콜이다 

⇒ 주로 신뢰성있는 전송이 필요한 경우 이용하는 프로토콜이다 

TCP의 특징 

1. **TCP의 연결 설정과 해제**
    
    TCP는 데이터를 주고받기 전에 3-way 핸드셰이크라는 과정을 거쳐 세션을 설정하고, 데이터 전송이 완료되면  4-way 핸드셰이크 과정을 통해 세션을 해제한다.
    
    - 3-way 핸드셰이크
        
        클라이언트가 서버에게 연결 요청을 보내고, 서버가 이를 수락한 후, 다시 클라이언트가 서버에게 수락했다는 신호를 보내 연결을 보내는 과정 
        
        ![Untitled](https://github.com/spharos3rd-CatchYou/Network/assets/87631575/e8d45273-e9a0-4753-bee9-f0fb5e464f40)
        
        **[STEP 1]**
        
        수신측은 송신측에  접속을 요청하는 SYN 패킷을 보낸다. 
        
        수신측 : SYN 을 보내고 SYN/ACK 응답을 기다리는 SYN_SENT 상태가 된다.
        
        **[STEP 2]**
        
        송신측은 SYN요청을 받고 수신측에 요청을 수락한다는 ACK 와 SYN flag 가 설정된 패킷을 발송하고 수신측이 다시 ACK으로 응답하기를 기다린다. 
        
        송신측 : SYN_RECEIVED 상태가 된다.
        
        **[STEP 3]**
        
        수신측은 송신측에게 ACK을 보내고 이후로부터는 연결이 이루어지고 데이터가 오가게 된다. 
        
        송신측 상태 : ESTABLISHED 
        
    - 4-way 핸드셰이크
        
        클라이언트와 서버의 연결을 해제하는 방법 
        
        ![Untitled 1](https://github.com/spharos3rd-CatchYou/Network/assets/87631575/6093d84b-64fd-4e2f-aebf-f94e9c603281)
        
    
    **[STEP 1]**
    
    수신측이 연결을 종료하겠다는 FIN플래그를 전송한다.
    
    **[STEP 2]**
    
    송신측은 ACK를 보내고 자신의 통신이 끝날 때까지 기다리는데 이 상태가 **TIME_WAIT**상태다.
    
    **[STEP 3]**
    
    송신측이 통신이 끝났으면 연결이 종료되었다고 수신측에게 FIN플래그를 전송한다.
    
    **[STEP 4]**
    
    수신측은 ACK를 보낸다.
    
2. **흐름 제어**
    
    데이터 전송 방식에는 두가지 방식이 존재한다 
    
    - 밀기 : 정보가 생성 될때 마다 데이터를 전송하는 방식
    - 끌기 : 수신측이 요청하면 데이터를 전송하는 방식
    
    데이터 전송 프로세스 
    
    송신 응용 → 송신전송 (밀기방식)
    
    송신전송 → 수신전송 (밀기방식) 
    
    수신전송 → 수신응용 (끌기방식) 
    
    ⇒ 밀기 방식으로 데이터를 전송하는 부분에서 흐름제어가 필요하다 
    
    흐름제어의 구현을 버퍼를 통해서 한다 
    
3. **오류제어** 
    
    TCP 는 신뢰가능한 데이터를 보장하기 위해 순서번호와 확인응답과 같은 방법을 통해 오류제어를 수행한다.
    
    - 오류 제어 기능
        - 훼손된 패킷의 감지 및 폐기
        - 손실되거나 제거된 패밋을 추적하고 재전송
        - 중복 수신 패킷을 확인하고 폐기
        - 손실된 패킷이 도착할 때까지 순서에 어긋나게 들어온 패킷을 버퍼에 저장
    - 순서번호(SYN)
        
        패킷의 순서 번호를 저장 할 수 있도록 전송 계층 필드에 전송순서를 알 수 있는 순서번호를 추가해 순서에 맞지 않는 데이터가 오면 재전송을 요청해 오류를 제어하는 방식이다 
        
    - 확인 응답(ACK)
        
        송신측에서 타이머를 구동하고 타이머가 만료되기 전까지 수신 측에서 확인응답(ACK)가 도착하지 않으면 패킷을 재전송하여 오류를 제어하는 방식이다   
        
4. **혼잡 제어**
    
    흐름제어 과정에서 버퍼의 양을 초과해서 데이터를 주고 받는 것을 방지하기 위해서 수행한다
    
    수신 →  송신 : 자신의 수용 가능한 버퍼 크기를 통보
    
    송신측은 이에 따라 데이터를 조절하여 흐름제어
    

### UDP

UDP (user datagram protocol)은 전송계층 프로토콜 중 하나로 신뢰성 없는 비연결형 프로토콜이다. 

⇒ 최소한의 오버헤드를 사용하기 때문에 간단하다 

→ 신뢰성이 필요하지 않은 작은 메시지를 전송할 때 사용한다
